-extends "base.haml"

-load bootstrap3

-block content
  .fuelux
    %h1 Event administration
    %hr

    .row
      %p
        %a.btn.btn-primary.btn-lg{href: "{% url 'event_detail' event.slug %}", target: "_blank"}
          Access event public page

      .alert.alert-danger
        %b Don't lose this URL! This is your only way to edit this event information. Bookmark it or write it somewhere:
        %a{href: "{{ current_page_url }}"}= current_page_url

    %form.form{method: "post"}
      -csrf_token

      .row
        .form-group
          .col-md-6
            -bootstrap_field form.title
          .col-md-6
            .form-group
              %label.control-label{for: "id_slug"}
                Public url
              %input.form-control{placeholder: "slug", title: "", type: "text", value: "{{ current_base_url }}{{ event.slug }}/", readonly: "true"}

      .form-group
        -bootstrap_field form.description

      -include "scheduler.haml"

      .form-group
        -bootstrap_field form.location_address

      .form-group
        %button.btn.btn-primary.form-control{type: "submit"}
          Modify

-block javascript
  :javascript
    $(function() {
      $("#myStartDate").val("{% if form.date.data %}{{ form.date.data }}{% elif event.date %}{{ event.date|date:'d/m/Y' }}{% endif %}")
      $("#myStartTime").val("{% if form.time.data %}{{ form.time.data }}{% elif event.time %}{{ event.time|time:'G:i' }}{% endif %}")
    })
